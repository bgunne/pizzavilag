{"version":3,"sources":["components/PizzaEditor/PizzaEditor.js","pages/Admin/Admin.js","redux/actions/admin.js"],"names":["PizzaEditor","this","props","pizza","onFormChange","onFileInputChangeHandler","Form","style","Row","Col","className","Group","controlId","Label","id","Control","type","placeholder","defaultValue","name","onChange","topping","price","File","Input","React","Component","Admin","event","onPizzaEditFormChange","target","value","updatePizza","a","pizzaEdit","handleAlert","imageurl","emptyPizzaEdit","setState","showEdit","uploadPizza","showUpload","files","onFileUploadHandler","data","FormData","append","selectedFile","myHeaders","Headers","Env","apiClientIDImgur","fetch","apiUrlImgur","method","headers","body","redirect","response","json","link","state","showFail","loadPizzaEdit","setEditId","show","height","width","marginLeft","marginRight","onClick","setModificationType","handleCloseAddForm","backgroundColor","newPizza","pizzaList","length","requestPizzaList","prevProps","prevState","modificationType","deleteId","deletePizza","Alert","variant","Button","boxSizing","key","addBar","map","i","editId","src","alt","objectFit","changePizza","setDeleteId","connect","managePizzaList","user","manageUser","manageEdit","dispatch","targetId","CHANGE_PIZZA_EDIT_FORM","payload","CHANGE_FILE_INPUT","LOAD_PIZZA_EDIT","EMPTY_PIZZA_EDIT","SET_EDIT_ID","SET_DELETE_ID","SET_MODIFICATION_TYPE"],"mappings":"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","file":"static/js/9.303d16ba.chunk.js","sourcesContent":["import React from 'react'\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { FormattedMessage } from 'react-intl';\r\nclass PizzaEditor extends React.Component {\r\n    render() {\r\n        const { pizza, onFormChange, onFileInputChangeHandler } = this.props;\r\n        return (\r\n            <Form style={{}}>\r\n                <Form.Row>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"name\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.name\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Név\"\r\n                                defaultValue={pizza.name}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"topping\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.toppings\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Feltétek\"\r\n                                defaultValue={pizza.topping}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"price\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.price\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"number\"\r\n                                placeholder=\"Ár\"\r\n                                defaultValue={pizza.price}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.File id=\"formcheck-api-regular\">\r\n                            <Form.File.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.image\" />\r\n                            </Form.File.Label>\r\n                            <Form.File.Input type=\"file\" onChange={onFileInputChangeHandler} />\r\n                        </Form.File>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\nexport default PizzaEditor;","import React, { Component } from 'react';\r\nimport PizzaEditor from '../../components/PizzaEditor/PizzaEditor';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { requestPizzaList, deletePizza, uploadPizza, updatePizza } from '../../redux/actions/app.js';\r\nimport { onPizzaEditFormChange, onFileInputChangeHandler, loadPizzaEdit, emptyPizzaEdit, setEditId, setDeleteId, setModificationType } from '../../redux/actions/admin.js';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Env } from '../../utils/Env';\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpizzaList: state.managePizzaList.pizzaList,\r\n\t\tuser: state.manageUser.user,\r\n\t\tpizzaEdit: state.onPizzaEditFormChange.pizzaEdit,\r\n\t\teditId: state.manageEdit.editId,\r\n\t\tdeleteId: state.manageEdit.deleteId,\r\n\t\tmodificationType: state.manageEdit.modificationType,\r\n\t\tselectedFile: state.manageEdit.selectedFile\r\n\t}\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestPizzaList: () => requestPizzaList(dispatch),\r\n\t\tdeletePizza: (id) => deletePizza(dispatch, id),\r\n\t\tuploadPizza: (name, topping, price, imageurl) => uploadPizza(dispatch, name, topping, price, imageurl),\r\n\t\tupdatePizza: (id, name, topping, price, imageurl) => updatePizza(dispatch, id, name, topping, price, imageurl),\r\n\t\tonPizzaEditFormChange: (data, targetId) => onPizzaEditFormChange(dispatch, data, targetId),\r\n\t\tonFileInputChangeHandler: (data) => onFileInputChangeHandler(dispatch, data),\r\n\t\tloadPizzaEdit: (pizza) => loadPizzaEdit(dispatch, pizza),\r\n\t\temptyPizzaEdit: () => dispatch(emptyPizzaEdit()),\r\n\t\tsetEditId: (id) => setEditId(dispatch, id),\r\n\t\tsetDeleteId: (id) => setDeleteId(dispatch, id),\r\n\t\tsetModificationType: (type) => setModificationType(dispatch, type)\r\n\t}\r\n}\r\nclass Admin extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowEdit: false,\r\n\t\t\tshowUpload: false,\r\n\t\t\tshowFail: false,\r\n\t\t};\r\n\t}\r\n\tchangePizza(pizza) {\r\n\t\tthis.props.loadPizzaEdit(pizza);\r\n\t\tthis.props.setEditId(pizza.id);\r\n\t\tthis.setState({ showEdit: true });\r\n\t}\r\n\tnewPizza() {\r\n\t\tthis.props.emptyPizzaEdit();\r\n\t\tthis.setState({ showUpload: true });\r\n\t}\r\n\tonFormChange = (event) => {\r\n\t\tthis.props.onPizzaEditFormChange(event.target.value, event.target.id);\r\n\t};\r\n\tupdatePizza = async () => {\r\n\t\tif (!this.props.pizzaEdit.name || !this.props.pizzaEdit.topping || !this.props.pizzaEdit.price) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait this.props.updatePizza(this.props.pizzaEdit.id, this.props.pizzaEdit.name, this.props.pizzaEdit.topping, this.props.pizzaEdit.price, this.props.pizzaEdit.imageurl);\r\n\t\t\tthis.props.emptyPizzaEdit();\r\n\t\t\tthis.setState({ showEdit: false });\r\n\t\t}\r\n\t}\r\n\tuploadPizza = async () => {\r\n\t\tif (!this.props.pizzaEdit.name || !this.props.pizzaEdit.topping || !this.props.pizzaEdit.price) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait this.props.uploadPizza(this.props.pizzaEdit.name, this.props.pizzaEdit.topping, this.props.pizzaEdit.price, this.props.pizzaEdit.imageurl);\r\n\t\t\tthis.props.emptyPizzaEdit();\r\n\t\t\tthis.setState({ showUpload: false });\r\n\t\t}\r\n\t}\r\n\thandleCloseAddForm() {\r\n\t\tthis.setState({ showUpload: false })\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t}\r\n\taddBar() {\r\n\t\tif (this.state.showUpload === true) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"ma-auto flex tc items-center\">\r\n\t\t\t\t\t<PizzaEditor\r\n\t\t\t\t\t\tonFileInputChangeHandler={this.onFileInputChangeHandler}\r\n\t\t\t\t\t\tpizza={[]}\r\n\t\t\t\t\t\tonFormChange={this.onFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"self-end pa1 h-auto\"\r\n\t\t\t\t\t\tstyle={{ height: '100px', width: '16%', marginLeft: '0', marginRight: '0' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mh1\"\r\n\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\tawait this.onFileUploadHandler();\r\n\t\t\t\t\t\t\t\tthis.props.setModificationType(\"upload\");\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.upload\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red mh1\"\r\n\t\t\t\t\t\t\tonClick={() => this.handleCloseAddForm()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.cancel\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0 mt-auto mb-auto center\"\r\n\t\t\t\t\tstyle={{ backgroundColor: '#c4954f' }}\r\n\t\t\t\t\tonClick={() => this.newPizza()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\tid=\"admin.add\" />\r\n\t\t\t\t</p>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonFileInputChangeHandler = async (event) => {\r\n\t\tawait this.props.onFileInputChangeHandler(event.target.files[0]);\r\n\t};\r\n\tonFileUploadHandler = async () => {\r\n\t\tconst data = new FormData();\r\n\t\tdata.append('image', this.props.selectedFile);\r\n\t\tconst myHeaders = new Headers();\r\n\t\tmyHeaders.append(\"Authorization\", Env.apiClientIDImgur);\r\n\t\tif (this.props.selectedFile) {\r\n\t\t\tconst response = await fetch(Env.apiUrlImgur, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: myHeaders,\r\n\t\t\t\tbody: data,\r\n\t\t\t\tredirect: 'follow'\r\n\t\t\t});\r\n\t\t\tconst body = await response.json();\r\n\t\t\tthis.props.onPizzaEditFormChange(body.data.link, \"imageurl\");\r\n\t\t}\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tif (!this.props.pizzaList.length) {\r\n\t\t\tthis.props.requestPizzaList();\r\n\t\t}\r\n\t}\r\n\tasync componentDidUpdate(prevProps, prevState) {\r\n\t\tconst { modificationType, deleteId } = this.props;\r\n\t\tif (modificationType !== prevProps.modificationType) {\r\n\t\t\tif (modificationType === \"update\") {\r\n\t\t\t\tthis.updatePizza();\r\n\t\t\t}\r\n\t\t\telse if (modificationType === \"upload\") {\r\n\t\t\t\tthis.uploadPizza();\r\n\t\t\t}\r\n\t\t\telse if (modificationType === \"delete\") {\r\n\t\t\t\tthis.props.deletePizza(deleteId);\r\n\t\t\t}\r\n\t\t\tawait this.props.setModificationType('');\r\n\t\t\tthis.props.requestPizzaList();\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { pizzaList } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className=\"w-80 flex items-center center\">\r\n\t\t\t\t<article className=\"pa2 w-100\" style={{ height: 'pizzaList.length * 150px' }}>\r\n\t\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.admin\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t\t<div className=\"flex justify-between items-center pa2\">\r\n\t\t\t\t\t\t<h1 className=\"f4 bold left tl mw6 mt-auto mb-auto\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.pizzaList\" />\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul className=\"list pl0 ml0 center ba b--light-silver br \">\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow\"\r\n\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box' }}\r\n\t\t\t\t\t\t\tkey=\"0\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.addBar()}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t{pizzaList.map((pizza, i) => {\r\n\t\t\t\t\t\t\tif (this.props.editId === pizza.id && this.state.showEdit) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box' }}\r\n\t\t\t\t\t\t\t\t\t\tkey={pizza.id}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<PizzaEditor\r\n\t\t\t\t\t\t\t\t\t\t\tonFileInputChangeHandler={this.onFileInputChangeHandler}\r\n\t\t\t\t\t\t\t\t\t\t\tpizza={pizza}\r\n\t\t\t\t\t\t\t\t\t\t\tonFormChange={this.onFormChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-10 pa1 h-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%', marginLeft: '0', marginRight: '0' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mt-auto mb-auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.onFileUploadHandler();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setModificationType('update');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.save\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box', backgroundColor: '#c4954f' }}\r\n\t\t\t\t\t\t\t\t\t\tkey={pizza.id}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.topping}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.price} Ft</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={pizza.imageurl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={pizza.imageurl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"db br2 br--top\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ objectFit: 'cover', width: '200px', height: '100px' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"self-end pa1 h-auto\" style={{ height: '100px', width: '16%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-gold\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.changePizza(pizza)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.edit\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setDeleteId(pizza.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setModificationType(\"delete\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.delete\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</article>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Admin);\r\n","import { CHANGE_PIZZA_EDIT_FORM, LOAD_PIZZA_EDIT, EMPTY_PIZZA_EDIT, SET_EDIT_ID, SET_DELETE_ID, SET_MODIFICATION_TYPE, CHANGE_FILE_INPUT } from \"../actiontypes/admin\"\r\nexport const onPizzaEditFormChange = (dispatch, data, targetId) => {\r\n\tdispatch({ type: CHANGE_PIZZA_EDIT_FORM, payload: data, id: targetId });\r\n}\r\nexport const onFileInputChangeHandler = (dispatch, data) => {\r\n\tdispatch({ type: CHANGE_FILE_INPUT, payload: data });\r\n}\r\nexport const loadPizzaEdit = (dispatch, pizza) => {\r\n\tdispatch({ type: LOAD_PIZZA_EDIT, payload: pizza });\r\n}\r\nexport const emptyPizzaEdit = () => ({ type: EMPTY_PIZZA_EDIT });\r\nexport const setEditId = (dispatch, id) => {\r\n\tdispatch({ type: SET_EDIT_ID, payload: id });\r\n}\r\nexport const setDeleteId = (dispatch, id) => {\r\n\tdispatch({ type: SET_DELETE_ID, payload: id });\r\n}\r\nexport const setModificationType = (dispatch, type) => {\r\n\tdispatch({ type: SET_MODIFICATION_TYPE, payload: type });\r\n}"],"sourceRoot":""}