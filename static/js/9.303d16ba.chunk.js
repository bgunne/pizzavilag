(this.webpackJsonppizzavilag=this.webpackJsonppizzavilag||[]).push([[9],{105:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a.n(n),r=a(7),l=a(16),o=a(26),c=a(33),p=a(34),s=a(0),d=a.n(s),u=a(89),m=a(88),h=a(82),z=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.pizza,a=e.onFormChange,n=e.onFileInputChangeHandler;return d.a.createElement(u.a,{style:{}},d.a.createElement(u.a.Row,null,d.a.createElement(m.a,{className:"col-3"},d.a.createElement(u.a.Group,{controlId:"name"},d.a.createElement(u.a.Label,null,d.a.createElement(h.a,{id:"pizzaeditor.name"})),d.a.createElement(u.a.Control,{type:"text",placeholder:"N\xe9v",defaultValue:t.name,onChange:a}))),d.a.createElement(m.a,{className:"col-3"},d.a.createElement(u.a.Group,{controlId:"topping"},d.a.createElement(u.a.Label,null,d.a.createElement(h.a,{id:"pizzaeditor.toppings"})),d.a.createElement(u.a.Control,{type:"text",placeholder:"Felt\xe9tek",defaultValue:t.topping,onChange:a}))),d.a.createElement(m.a,{className:"col-3"},d.a.createElement(u.a.Group,{controlId:"price"},d.a.createElement(u.a.Label,null,d.a.createElement(h.a,{id:"pizzaeditor.price"})),d.a.createElement(u.a.Control,{type:"number",placeholder:"\xc1r",defaultValue:t.price,onChange:a}))),d.a.createElement(m.a,{className:"col-3"},d.a.createElement(u.a.File,{id:"formcheck-api-regular"},d.a.createElement(u.a.File.Label,null,d.a.createElement(h.a,{id:"pizzaeditor.image"})),d.a.createElement(u.a.File.Input,{type:"file",onChange:n})))))}}]),a}(d.a.Component),f=a(87),b=a(86),g=a(14),E=a(24),w=a(35),y=a(32),v=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onFormChange=function(e){n.props.onPizzaEditFormChange(e.target.value,e.target.id)},n.updatePizza=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.pizzaEdit.name&&n.props.pizzaEdit.topping&&n.props.pizzaEdit.price){e.next=4;break}n.handleAlert("showFail",!0),e.next=8;break;case 4:return e.next=6,n.props.updatePizza(n.props.pizzaEdit.id,n.props.pizzaEdit.name,n.props.pizzaEdit.topping,n.props.pizzaEdit.price,n.props.pizzaEdit.imageurl);case 6:n.props.emptyPizzaEdit(),n.setState({showEdit:!1});case 8:case"end":return e.stop()}}),e)}))),n.uploadPizza=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.props.pizzaEdit.name&&n.props.pizzaEdit.topping&&n.props.pizzaEdit.price){e.next=4;break}n.handleAlert("showFail",!0),e.next=8;break;case 4:return e.next=6,n.props.uploadPizza(n.props.pizzaEdit.name,n.props.pizzaEdit.topping,n.props.pizzaEdit.price,n.props.pizzaEdit.imageurl);case 6:n.props.emptyPizzaEdit(),n.setState({showUpload:!1});case 8:case"end":return e.stop()}}),e)}))),n.onFileInputChangeHandler=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.props.onFileInputChangeHandler(t.target.files[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFileUploadHandler=Object(r.a)(i.a.mark((function e(){var t,a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new FormData).append("image",n.props.selectedFile),(a=new Headers).append("Authorization",y.a.apiClientIDImgur),!n.props.selectedFile){e.next=12;break}return e.next=7,fetch(y.a.apiUrlImgur,{method:"POST",headers:a,body:t,redirect:"follow"});case 7:return r=e.sent,e.next=10,r.json();case 10:l=e.sent,n.props.onPizzaEditFormChange(l.data.link,"imageurl");case 12:case"end":return e.stop()}}),e)}))),n.state={showEdit:!1,showUpload:!1,showFail:!1},n}return Object(o.a)(a,[{key:"changePizza",value:function(e){this.props.loadPizzaEdit(e),this.props.setEditId(e.id),this.setState({showEdit:!0})}},{key:"newPizza",value:function(){this.props.emptyPizzaEdit(),this.setState({showUpload:!0})}},{key:"handleCloseAddForm",value:function(){this.setState({showUpload:!1})}},{key:"handleAlert",value:function(e,t){"showFail"===e&&this.setState({showFail:t})}},{key:"addBar",value:function(){var e=this;return!0===this.state.showUpload?d.a.createElement("div",{className:"ma-auto flex tc items-center"},d.a.createElement(z,{onFileInputChangeHandler:this.onFileInputChangeHandler,pizza:[],onFormChange:this.onFormChange}),d.a.createElement("div",{className:"self-end pa1 h-auto",style:{height:"100px",width:"16%",marginLeft:"0",marginRight:"0"}},d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mh1",onClick:Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFileUploadHandler();case 2:e.props.setModificationType("upload");case 3:case"end":return t.stop()}}),t)})))},d.a.createElement(h.a,{id:"admin.upload"})),d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red mh1",onClick:function(){return e.handleCloseAddForm()}},d.a.createElement(h.a,{id:"admin.cancel"})))):d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0 mt-auto mb-auto center",style:{backgroundColor:"#c4954f"},onClick:function(){return e.newPizza()}},d.a.createElement(h.a,{id:"admin.add"}))}},{key:"componentDidMount",value:function(){this.props.pizzaList.length||this.props.requestPizzaList()}},{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,a){var n,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.modificationType,l=n.deleteId,r===t.modificationType){e.next=6;break}return"update"===r?this.updatePizza():"upload"===r?this.uploadPizza():"delete"===r&&this.props.deletePizza(l),e.next=5,this.props.setModificationType("");case 5:this.props.requestPizzaList();case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.pizzaList;return d.a.createElement("div",{className:"w-80 flex items-center center"},d.a.createElement("article",{className:"pa2 w-100",style:{height:"pizzaList.length * 150px"}},d.a.createElement(f.a,{show:this.state.showFail,variant:"danger"},d.a.createElement("p",null,d.a.createElement(h.a,{id:"alert.admin"})),d.a.createElement("hr",null),d.a.createElement("div",{className:"d-flex justify-content-end"},d.a.createElement(b.a,{onClick:function(){return e.handleAlert("showFail",!1)},variant:"outline-danger"},d.a.createElement(h.a,{id:"alert.close"})))),d.a.createElement("div",{className:"flex justify-between items-center pa2"},d.a.createElement("h1",{className:"f4 bold left tl mw6 mt-auto mb-auto"},d.a.createElement(h.a,{id:"admin.pizzaList"}))),d.a.createElement("ul",{className:"list pl0 ml0 center ba b--light-silver br "},d.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow",style:{boxSizing:"content-box"},key:"0"},this.addBar()),t.map((function(t,a){return e.props.editId===t.id&&e.state.showEdit?d.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow",style:{boxSizing:"content-box"},key:t.id},d.a.createElement(z,{onFileInputChangeHandler:e.onFileInputChangeHandler,pizza:t,onFormChange:e.onFormChange}),d.a.createElement("div",{className:"w-10 pa1 h-auto flex tc items-center center",style:{height:"100px",width:"16%",marginLeft:"0",marginRight:"0"}},d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mt-auto mb-auto",onClick:Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFileUploadHandler();case 2:e.props.setModificationType("update");case 3:case"end":return t.stop()}}),t)})))},d.a.createElement(h.a,{id:"admin.save"})))):d.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center",style:{boxSizing:"content-box",backgroundColor:"#c4954f"},key:t.id},d.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},d.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.name)),d.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},d.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.topping)),d.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},d.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.price," Ft")),d.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},d.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},d.a.createElement("img",{src:t.imageurl,alt:t.imageurl,className:"db br2 br--top",style:{objectFit:"cover",width:"200px",height:"100px"}}))),d.a.createElement("div",{className:"self-end pa1 h-auto",style:{height:"100px",width:"16%"}},d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-gold",onClick:function(){return e.changePizza(t)}},d.a.createElement(h.a,{id:"admin.edit"})),d.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red",onClick:function(){e.props.setDeleteId(t.id),e.props.setModificationType("delete")}},d.a.createElement(h.a,{id:"admin.delete"}))))})))))}}]),a}(s.Component);t.default=Object(w.b)((function(e){return{pizzaList:e.managePizzaList.pizzaList,user:e.manageUser.user,pizzaEdit:e.onPizzaEditFormChange.pizzaEdit,editId:e.manageEdit.editId,deleteId:e.manageEdit.deleteId,modificationType:e.manageEdit.modificationType,selectedFile:e.manageEdit.selectedFile}}),(function(e){return{requestPizzaList:function(){return Object(g.i)(e)},deletePizza:function(t){return Object(g.d)(e,t)},uploadPizza:function(t,a,n,i){return Object(g.q)(e,t,a,n,i)},updatePizza:function(t,a,n,i,r){return Object(g.o)(e,t,a,n,i,r)},onPizzaEditFormChange:function(t,a){return function(e,t,a){e({type:E.b,payload:t,id:a})}(e,t,a)},onFileInputChangeHandler:function(t){return function(e,t){e({type:E.a,payload:t})}(e,t)},loadPizzaEdit:function(t){return function(e,t){e({type:E.d,payload:t})}(e,t)},emptyPizzaEdit:function(){return e({type:E.c})},setEditId:function(t){return function(e,t){e({type:E.f,payload:t})}(e,t)},setDeleteId:function(t){return function(e,t){e({type:E.e,payload:t})}(e,t)},setModificationType:function(t){return function(e,t){e({type:E.g,payload:t})}(e,t)}}}))(v)}}]);
//# sourceMappingURL=9.303d16ba.chunk.js.map