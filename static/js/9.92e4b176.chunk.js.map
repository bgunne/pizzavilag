{"version":3,"sources":["components/PizzaEditor/PizzaEditor.js","pages/Admin/Admin.js","redux/actions/admin.js"],"names":["PizzaEditor","this","props","pizza","onFormChange","onFileInputChangeHandler","Form","style","Row","Col","className","Group","controlId","Label","id","Control","type","placeholder","defaultValue","name","onChange","topping","price","File","Input","React","Component","Admin","event","onPizzaEditFormChange","target","value","updatePizza","a","pizzaEdit","handleAlert","imageurl","emptyPizzaEdit","setState","showEdit","uploadPizza","showUpload","files","onFileUploadHandler","data","FormData","append","selectedFile","myHeaders","Headers","Env","apiClientIDImgur","fetch","apiUrlImgur","method","headers","body","redirect","response","json","console","log","link","state","showFail","loadPizzaEdit","setEditId","show","height","width","marginLeft","marginRight","onClick","setModificationType","handleCloseAddForm","backgroundColor","newPizza","pizzas","length","requestPizzas","prevProps","prevState","modificationType","deleteId","deletePizza","Alert","variant","Button","boxSizing","key","addBar","map","i","editId","src","alt","objectFit","changePizza","setDeleteId","connect","managePizzas","user","manageUser","manageEdit","dispatch","targetId","CHANGE_PIZZA_EDIT_FORM","payload","CHANGE_FILE_INPUT","LOAD_PIZZA_EDIT","EMPTY_PIZZA_EDIT","SET_EDIT_ID","SET_DELETE_ID","SET_MODIFICATION_TYPE"],"mappings":"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","file":"static/js/9.92e4b176.chunk.js","sourcesContent":["import React from 'react'\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { FormattedMessage } from 'react-intl';\r\nclass PizzaEditor extends React.Component {\r\n    render() {\r\n        const { pizza, onFormChange, onFileInputChangeHandler } = this.props;\r\n        return (\r\n            <Form style={{}}>\r\n                <Form.Row>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"name\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.name\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Név\"\r\n                                defaultValue={pizza.name}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"topping\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.toppings\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"text\"\r\n                                placeholder=\"Feltétek\"\r\n                                defaultValue={pizza.topping}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.Group controlId=\"price\">\r\n                            <Form.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.price\" />\r\n                            </Form.Label>\r\n                            <Form.Control\r\n                                type=\"number\"\r\n                                placeholder=\"Ár\"\r\n                                defaultValue={pizza.price}\r\n                                onChange={onFormChange} />\r\n                        </Form.Group>\r\n                    </Col>\r\n                    <Col className=\"col-3\">\r\n                        <Form.File id=\"formcheck-api-regular\">\r\n                            <Form.File.Label>\r\n                                <FormattedMessage\r\n                                    id=\"pizzaeditor.image\" />\r\n                            </Form.File.Label>\r\n                            <Form.File.Input type=\"file\" onChange={onFileInputChangeHandler} />\r\n                        </Form.File>\r\n                    </Col>\r\n                </Form.Row>\r\n            </Form>\r\n        );\r\n    }\r\n}\r\nexport default PizzaEditor;","import React, { Component } from 'react';\r\nimport PizzaEditor from '../../components/PizzaEditor/PizzaEditor';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { requestPizzas, deletePizza, uploadPizza, updatePizza } from '../../redux/actions/app.js';\r\nimport { onPizzaEditFormChange, onFileInputChangeHandler, loadPizzaEdit, emptyPizzaEdit, setEditId, setDeleteId, setModificationType } from '../../redux/actions/admin.js';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Env } from '../../utils/Env';\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tpizzas: state.managePizzas.pizzas,\r\n\t\tuser: state.manageUser.user,\r\n\t\tpizzaEdit: state.onPizzaEditFormChange.pizzaEdit,\r\n\t\teditId: state.manageEdit.editId,\r\n\t\tdeleteId: state.manageEdit.deleteId,\r\n\t\tmodificationType: state.manageEdit.modificationType\r\n\t}\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\trequestPizzas: () => requestPizzas(dispatch),\r\n\t\tdeletePizza: (id) => deletePizza(dispatch, id),\r\n\t\tuploadPizza: (name, topping, price, imageurl) => uploadPizza(dispatch, name, topping, price, imageurl),\r\n\t\tupdatePizza: (id, name, topping, price, imageurl) => updatePizza(dispatch, id, name, topping, price, imageurl),\r\n\t\tonPizzaEditFormChange: (data, targetId) => onPizzaEditFormChange(dispatch, data, targetId),\r\n\t\tonFileInputChangeHandler: (data) => onFileInputChangeHandler(dispatch, data),\r\n\t\tloadPizzaEdit: (pizza) => loadPizzaEdit(dispatch, pizza),\r\n\t\temptyPizzaEdit: () => dispatch(emptyPizzaEdit()),\r\n\t\tsetEditId: (id) => setEditId(dispatch, id),\r\n\t\tsetDeleteId: (id) => setDeleteId(dispatch, id),\r\n\t\tsetModificationType: (type) => setModificationType(dispatch, type)\r\n\t}\r\n}\r\nclass Admin extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowEdit: false,\r\n\t\t\tshowUpload: false,\r\n\t\t\tshowFail: false,\r\n\t\t};\r\n\t}\r\n\tchangePizza(pizza) {\r\n\t\tthis.props.loadPizzaEdit(pizza);\r\n\t\tthis.props.setEditId(pizza.id);\r\n\t\tthis.setState({ showEdit: true });\r\n\t}\r\n\tnewPizza() {\r\n\t\tthis.props.emptyPizzaEdit();\r\n\t\tthis.setState({ showUpload: true });\r\n\t}\r\n\tonFormChange = (event) => {\r\n\t\tthis.props.onPizzaEditFormChange(event.target.value, event.target.id);\r\n\t};\r\n\tupdatePizza = async () => {\r\n\t\tif (!this.props.pizzaEdit.name || !this.props.pizzaEdit.topping || !this.props.pizzaEdit.price) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait this.props.updatePizza(this.props.pizzaEdit.id, this.props.pizzaEdit.name, this.props.pizzaEdit.topping, this.props.pizzaEdit.price, this.props.pizzaEdit.imageurl);\r\n\t\t\tthis.props.emptyPizzaEdit();\r\n\t\t\tthis.setState({ showEdit: false });\r\n\t\t}\r\n\t}\r\n\tuploadPizza = async () => {\r\n\t\tif (!this.props.pizzaEdit.name || !this.props.pizzaEdit.topping || !this.props.pizzaEdit.price) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tawait this.props.uploadPizza(this.props.pizzaEdit.name, this.props.pizzaEdit.topping, this.props.pizzaEdit.price, this.props.pizzaEdit.imageurl);\r\n\t\t\tthis.props.emptyPizzaEdit();\r\n\t\t\tthis.setState({ showUpload: false });\r\n\t\t}\r\n\t}\r\n\thandleCloseAddForm() {\r\n\t\tthis.setState({ showUpload: false })\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t}\r\n\taddBar() {\r\n\t\tif (this.state.showUpload === true) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"ma-auto flex tc items-center\">\r\n\t\t\t\t\t<PizzaEditor\r\n\t\t\t\t\t\tonFileInputChangeHandler={this.onFileInputChangeHandler}\r\n\t\t\t\t\t\tpizza={[]}\r\n\t\t\t\t\t\tonFormChange={this.onFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"self-end pa1 h-auto\"\r\n\t\t\t\t\t\tstyle={{ height: '100px', width: '16%', marginLeft: '0', marginRight: '0' }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mh1\"\r\n\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\tawait this.onFileUploadHandler();\r\n\t\t\t\t\t\t\t\tthis.props.setModificationType(\"upload\");\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.upload\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red mh1\"\r\n\t\t\t\t\t\t\tonClick={() => this.handleCloseAddForm()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.cancel\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<p\r\n\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0 mt-auto mb-auto center\"\r\n\t\t\t\t\tstyle={{ backgroundColor: '#c4954f' }}\r\n\t\t\t\t\tonClick={() => this.newPizza()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\tid=\"admin.add\" />\r\n\t\t\t\t</p>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonFileInputChangeHandler = (event) => {\r\n\t\tthis.props.onFileInputChangeHandler(event.target.files[0]);\r\n\t};\r\n\tonFileUploadHandler = async () => {\r\n\t\tconst data = new FormData();\r\n\t\tdata.append('image', this.props.selectedFile);\r\n\t\tconst myHeaders = new Headers();\r\n\t\tmyHeaders.append(\"Authorization\", Env.apiClientIDImgur);\r\n\t\tif (this.props.selectedFile) {\r\n\t\t\tconst response = await fetch(Env.apiUrlImgur, {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: myHeaders,\r\n\t\t\t\tbody: data,\r\n\t\t\t\tredirect: 'follow'\r\n\t\t\t});\r\n\t\t\tconst body = await response.json();\r\n\t\t\tconsole.log(body.data.link);\r\n\t\t\tthis.props.onPizzaEditFormChange(body.data.link, \"imageurl\");\r\n\t\t}\r\n\t};\r\n\tcomponentDidMount() {\r\n\t\tif (!this.props.pizzas.length) {\r\n\t\t\tthis.props.requestPizzas();\r\n\t\t}\r\n\t}\r\n\tasync componentDidUpdate(prevProps, prevState) {\r\n\t\tconst { modificationType, deleteId } = this.props;\r\n\t\tif (modificationType !== prevProps.modificationType) {\r\n\t\t\tif (modificationType === \"update\") {\r\n\t\t\t\tthis.updatePizza();\r\n\t\t\t}\r\n\t\t\telse if (modificationType === \"upload\") {\r\n\t\t\t\tthis.uploadPizza();\r\n\t\t\t}\r\n\t\t\telse if (modificationType === \"delete\") {\r\n\t\t\t\tthis.props.deletePizza(deleteId);\r\n\t\t\t}\r\n\t\t\tawait this.props.setModificationType('');\r\n\t\t\tthis.props.requestPizzas();\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tconst { pizzas } = this.props;\r\n\t\treturn (\r\n\t\t\t<div className=\"w-80 flex items-center center\">\r\n\t\t\t\t<article className=\"pa2 w-100\" style={{ height: 'pizzas.length * 150px' }}>\r\n\t\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.admin\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Alert>\r\n\t\t\t\t\t<div className=\"flex justify-between items-center pa2\">\r\n\t\t\t\t\t\t<h1 className=\"f4 bold left tl mw6 mt-auto mb-auto\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"admin.pizzas\" />\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ul className=\"list pl0 ml0 center ba b--light-silver br \">\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow\"\r\n\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box' }}\r\n\t\t\t\t\t\t\tkey=\"0\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.addBar()}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t{pizzas.map((pizza, i) => {\r\n\t\t\t\t\t\t\tif (this.props.editId === pizza.id && this.state.showEdit) {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box' }}\r\n\t\t\t\t\t\t\t\t\t\tkey={pizza.id}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<PizzaEditor\r\n\t\t\t\t\t\t\t\t\t\t\tonFileInputChangeHandler={this.onFileInputChangeHandler}\r\n\t\t\t\t\t\t\t\t\t\t\tpizza={pizza}\r\n\t\t\t\t\t\t\t\t\t\t\tonFormChange={this.onFormChange}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"w-10 pa1 h-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%', marginLeft: '0', marginRight: '0' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mt-auto mb-auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tawait this.onFileUploadHandler();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setModificationType('update');\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.save\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"ph3 pv3 bb b--light-silver flex tc items-center\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{ boxSizing: 'content-box', backgroundColor: '#c4954f' }}\r\n\t\t\t\t\t\t\t\t\t\tkey={pizza.id}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.name}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.topping}</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">{pizza.price} Ft</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\" ma-auto flex tc items-center center\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100px', width: '16%' }}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"w-100 center mt-auto mb-auto\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsrc={pizza.imageurl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talt={pizza.imageurl}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"db br2 br--top\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ objectFit: 'cover', width: '200px', height: '100px' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"self-end pa1 h-auto\" style={{ height: '100px', width: '16%' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-gold\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.changePizza(pizza)}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.edit\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setDeleteId(pizza.id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.props.setModificationType(\"delete\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"admin.delete\" />\r\n\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</article>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Admin);\r\n","import { CHANGE_PIZZA_EDIT_FORM, LOAD_PIZZA_EDIT, EMPTY_PIZZA_EDIT, SET_EDIT_ID, SET_DELETE_ID, SET_MODIFICATION_TYPE, CHANGE_FILE_INPUT } from \"../actiontypes/admin\"\r\nexport const onPizzaEditFormChange = (dispatch, data, targetId) => {\r\n\tdispatch({ type: CHANGE_PIZZA_EDIT_FORM, payload: data, id: targetId });\r\n}\r\nexport const onFileInputChangeHandler = (dispatch, data) => {\r\n\tdispatch({ type: CHANGE_FILE_INPUT, payload: data });\r\n}\r\nexport const loadPizzaEdit = (dispatch, pizza) => {\r\n\tdispatch({ type: LOAD_PIZZA_EDIT, payload: pizza });\r\n}\r\nexport const emptyPizzaEdit = () => ({ type: EMPTY_PIZZA_EDIT });\r\nexport const setEditId = (dispatch, id) => {\r\n\tdispatch({ type: SET_EDIT_ID, payload: id });\r\n}\r\nexport const setDeleteId = (dispatch, id) => {\r\n\tdispatch({ type: SET_DELETE_ID, payload: id });\r\n}\r\nexport const setModificationType = (dispatch, type) => {\r\n\tdispatch({ type: SET_MODIFICATION_TYPE, payload: type });\r\n}"],"sourceRoot":""}