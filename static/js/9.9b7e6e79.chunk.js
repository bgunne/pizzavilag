(this.webpackJsonppizzavilag=this.webpackJsonppizzavilag||[]).push([[9],{126:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(9),l=a(47),c=a(11),s=a(24),o=a(29),p=a(30),d=a(0),m=a.n(d),u=a(106),h=a(105),z=a(45),b=function(e){Object(o.a)(a,e);var t=Object(p.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.pizza,a=e.onFormChange,n=e.onFileInputChangeHandler;return m.a.createElement(u.a,{style:{}},m.a.createElement(u.a.Row,null,m.a.createElement(h.a,{className:"col-3"},m.a.createElement(u.a.Group,{controlId:"name"},m.a.createElement(u.a.Label,null,m.a.createElement(z.a,{id:"pizzaeditor.name"})),m.a.createElement(u.a.Control,{type:"text",placeholder:"N\xe9v",defaultValue:t.name,onChange:a}))),m.a.createElement(h.a,{className:"col-3"},m.a.createElement(u.a.Group,{controlId:"topping"},m.a.createElement(u.a.Label,null,m.a.createElement(z.a,{id:"pizzaeditor.toppings"})),m.a.createElement(u.a.Control,{type:"text",placeholder:"Felt\xe9tek",defaultValue:t.topping,onChange:a}))),m.a.createElement(h.a,{className:"col-3"},m.a.createElement(u.a.Group,{controlId:"price"},m.a.createElement(u.a.Label,null,m.a.createElement(z.a,{id:"pizzaeditor.price"})),m.a.createElement(u.a.Control,{type:"number",placeholder:"\xc1r",defaultValue:t.price,onChange:a}))),m.a.createElement(h.a,{className:"col-3"},m.a.createElement(u.a.File,{id:"formcheck-api-regular"},m.a.createElement(u.a.File.Label,null,m.a.createElement(z.a,{id:"pizzaeditor.image"})),m.a.createElement(u.a.File.Input,{type:"file",onChange:n})))))}}]),a}(m.a.Component),f=a(104),g=a(103),E=a(20),w=a(31),v=a(28),x=a(46),k=function(e){Object(o.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onFormChange=function(e){n.setState(Object.assign(n.state.pizzaEdit,Object(l.a)({},e.target.id,e.target.value)))},n.setModificationType=function(e){n.setState({modificationType:e})},n.setDeleteId=function(e){n.setState({deleteId:e})},n.updatePizza=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.pizzaEdit.name&&n.state.pizzaEdit.topping&&n.state.pizzaEdit.price){e.next=4;break}n.handleAlert("showFail",!0),e.next=9;break;case 4:return n.props.dispatch(E.b.updatePizza()),e.next=7,x.a.updatePizza(n.state.pizzaEdit.id,n.state.pizzaEdit.name,n.state.pizzaEdit.topping,n.state.pizzaEdit.price,n.state.pizzaEdit.imageurl);case 7:return e.next=9,n.setState({pizzaEdit:[],showEdit:!1});case 9:case"end":return e.stop()}}),e)}))),n.uploadPizza=Object(r.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.state.pizzaEdit.name&&n.state.pizzaEdit.topping&&n.state.pizzaEdit.price){e.next=4;break}n.handleAlert("showFail",!0),e.next=9;break;case 4:return n.props.dispatch(E.b.uploadPizza()),e.next=7,x.a.uploadPizza(n.state.pizzaEdit.name,n.state.pizzaEdit.topping,n.state.pizzaEdit.price,n.state.pizzaEdit.imageurl);case 7:return e.next=9,n.setState({pizzaEdit:[],showUpload:!1});case 9:case"end":return e.stop()}}),e)}))),n.onFileInputChangeHandler=function(){var e=Object(r.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({selectedFile:t.target.files[0]});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.onFileUploadHandler=Object(r.a)(i.a.mark((function e(){var t,a,r,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new FormData).append("image",n.state.selectedFile),(a=new Headers).append("Authorization",v.a.apiClientIDImgur),!n.state.selectedFile){e.next=12;break}return e.next=7,fetch(v.a.apiUrlImgur,{method:"POST",headers:a,body:t,redirect:"follow"});case 7:return r=e.sent,e.next=10,r.json();case 10:l=e.sent,n.setState(Object.assign(n.state.pizzaEdit,{imageurl:l.data.link}));case 12:case"end":return e.stop()}}),e)}))),n.state={showEdit:!1,showUpload:!1,showFail:!1,pizzaEdit:{id:"",name:"",topping:"",price:"",imageurl:"",editId:"",deleteId:"",modificationType:"",selectedFile:""}},n}return Object(s.a)(a,[{key:"changePizza",value:function(e){this.setState({showEdit:!0,pizzaEdit:e,editId:e.id})}},{key:"newPizza",value:function(){this.setState({pizzaEdit:[],showUpload:!0})}},{key:"handleCloseAddForm",value:function(){this.setState({showUpload:!1})}},{key:"handleAlert",value:function(e,t){"showFail"===e&&this.setState({showFail:t})}},{key:"addBar",value:function(){var e=this;return!0===this.state.showUpload?m.a.createElement("div",{className:"ma-auto flex tc items-center"},m.a.createElement(b,{onFileInputChangeHandler:this.onFileInputChangeHandler,pizza:[],onFormChange:this.onFormChange}),m.a.createElement("div",{className:"self-end pa1 h-auto",style:{height:"100px",width:"16%",marginLeft:"0",marginRight:"0"}},m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mh1",onClick:Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFileUploadHandler();case 2:e.setModificationType("upload");case 3:case"end":return t.stop()}}),t)})))},m.a.createElement(z.a,{id:"admin.upload"})),m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red mh1",onClick:function(){return e.handleCloseAddForm()}},m.a.createElement(z.a,{id:"admin.cancel"})))):m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0 mt-auto mb-auto center",style:{backgroundColor:"#c4954f"},onClick:function(){return e.newPizza()}},m.a.createElement(z.a,{id:"admin.add"}))}},{key:"componentDidMount",value:function(){this.props.pizzaList.length||this.props.loadPizzaList()}},{key:"componentDidUpdate",value:function(){var e=Object(r.a)(i.a.mark((function e(t,a){var n,r,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state,r=n.modificationType,l=n.deleteId,c=this.props.pizzaList,r===a.modificationType){e.next=19;break}if("update"!==r){e.next=7;break}this.updatePizza(),e.next=15;break;case 7:if("upload"!==r){e.next=11;break}this.uploadPizza(),e.next=15;break;case 11:if("delete"!==r){e.next=15;break}return e.next=14,x.a.deletePizza(l);case 14:this.props.dispatch(E.b.deletePizza());case 15:if(!r.length){e.next=18;break}return e.next=18,this.setState({modificationType:""});case 18:c!==t.pizzaList&&this.props.loadPizzaList();case 19:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.pizzaList;return m.a.createElement("div",{className:"w-80 flex items-center center"},m.a.createElement("article",{className:"pa2 w-100",style:{height:"pizzaList.length * 150px"}},m.a.createElement(f.a,{show:this.state.showFail,variant:"danger"},m.a.createElement("p",null,m.a.createElement(z.a,{id:"alert.admin"})),m.a.createElement("hr",null),m.a.createElement("div",{className:"d-flex justify-content-end"},m.a.createElement(g.a,{onClick:function(){return e.handleAlert("showFail",!1)},variant:"outline-danger"},m.a.createElement(z.a,{id:"alert.close"})))),m.a.createElement("div",{className:"flex justify-between items-center pa2"},m.a.createElement("h1",{className:"f4 bold left tl mw6 mt-auto mb-auto"},m.a.createElement(z.a,{id:"admin.pizzaList"}))),m.a.createElement("ul",{className:"list pl0 ml0 center ba b--light-silver br "},m.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow",style:{boxSizing:"content-box"},key:"0"},this.addBar()),t.map((function(t,a){return e.state.editId===t.id&&e.state.showEdit?m.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center bg-light-yellow",style:{boxSizing:"content-box"},key:t.id},m.a.createElement(b,{onFileInputChangeHandler:e.onFileInputChangeHandler,pizza:t,onFormChange:e.onFormChange}),m.a.createElement("div",{className:"w-10 pa1 h-auto flex tc items-center center",style:{height:"100px",width:"16%",marginLeft:"0",marginRight:"0"}},m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-green mt-auto mb-auto",onClick:Object(r.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.onFileUploadHandler();case 2:e.setModificationType("update");case 3:case"end":return t.stop()}}),t)})))},m.a.createElement(z.a,{id:"admin.save"})))):m.a.createElement("li",{className:"ph3 pv3 bb b--light-silver flex tc items-center",style:{boxSizing:"content-box",backgroundColor:"#c4954f"},key:t.id},m.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},m.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.name)),m.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},m.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.topping)),m.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},m.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},t.price," Ft")),m.a.createElement("div",{className:" ma-auto flex tc items-center center",style:{height:"100px",width:"16%"}},m.a.createElement("p",{className:"w-100 center mt-auto mb-auto"},m.a.createElement("img",{src:t.imageurl,alt:t.imageurl,className:"db br2 br--top",style:{objectFit:"cover",width:"200px",height:"100px"}}))),m.a.createElement("div",{className:"self-end pa1 h-auto",style:{height:"100px",width:"16%"}},m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-gold",onClick:function(){return e.changePizza(t)}},m.a.createElement(z.a,{id:"admin.edit"})),m.a.createElement("p",{className:"f6 grow no-underline br-pill ph3 pv2 dib white pointer ba bw0 bg-dark-red",onClick:function(){e.setDeleteId(t.id),e.setModificationType("delete")}},m.a.createElement(z.a,{id:"admin.delete"}))))})))))}}]),a}(d.Component);t.default=Object(w.b)((function(e){return{pizzaList:e.managePizzaList.pizzaList,user:e.manageUser.user}}))(k)}}]);
//# sourceMappingURL=9.9b7e6e79.chunk.js.map