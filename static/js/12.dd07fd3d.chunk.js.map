{"version":3,"sources":["pages/Signin/Signin.js","redux/actions/signin.js"],"names":["Signin","props","onSigninFormChange","event","target","value","id","onSubmit","a","Api","signIn","signInEmail","signInPassword","json","user","loadUser","history","push","Path","root","role","admin","handleAlert","state","showFail","type","show","this","setState","Form","className","onKeyPress","ev","key","preventDefault","Alert","variant","Button","onClick","Group","controlId","Label","Control","placeholder","onChange","style","background","Component","connect","dispatch","data","targetId","CHANGE_SIGNIN_FORM","payload"],"mappings":"qQAuBMA,E,kDACL,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IAMPC,mBAAqB,SAACC,GACrB,EAAKF,MAAMC,mBAAmBC,EAAMC,OAAOC,MAAOF,EAAMC,OAAOE,KAR7C,EAUnBC,SAVmB,sBAUR,4BAAAC,EAAA,sEACgBC,IAAIC,OAAO,EAAKT,MAAMU,YAAa,EAAKV,MAAMW,gBAD9D,8BAC+EC,OAD/E,QACJC,EADI,QAEDR,IACR,EAAKL,MAAMc,SAASD,GACpB,EAAKb,MAAMS,SACX,EAAKT,MAAMe,QAAQC,KAAKC,IAAKC,MACX,UAAdL,EAAKM,OACR,EAAKnB,MAAMoB,QACX,EAAKpB,MAAMe,QAAQC,KAAKC,IAAKG,SAI9B,EAAKC,YAAY,YAAY,GAZpB,2CARV,EAAKC,MACL,CACCC,UAAU,GAJO,E,wDAyBPC,EAAMC,GACJ,aAATD,GACHE,KAAKC,SAAS,CAAEJ,SAAUE,M,+BAGlB,IAAD,OACR,OACC,kBAACG,EAAA,EAAD,CAAMC,UAAU,0CACfC,WAAY,SAACC,GACG,UAAXA,EAAGC,MACN,EAAK1B,WACLyB,EAAGE,oBAGL,kBAACC,EAAA,EAAD,CAAOT,KAAMC,KAAKJ,MAAMC,SAAUY,QAAQ,UACzC,2BACC,kBAAC,IAAD,CACC9B,GAAG,2BAEL,6BACA,yBAAKwB,UAAU,8BACd,kBAACO,EAAA,EAAD,CAAQC,QAAS,kBAAM,EAAKhB,YAAY,YAAY,IAAQc,QAAQ,kBACnE,kBAAC,IAAD,CACC9B,GAAG,mBAIP,kBAACuB,EAAA,EAAKU,MAAN,CAAYC,UAAU,eACrB,kBAACX,EAAA,EAAKY,MAAN,KACC,kBAAC,IAAD,CACCnC,GAAG,kBAEL,kBAACuB,EAAA,EAAKa,QAAN,CACCjB,KAAK,QACLkB,YAAY,sBACZC,SAAUjB,KAAKzB,sBAGjB,kBAAC2B,EAAA,EAAKU,MAAN,CAAYC,UAAU,kBACrB,kBAACX,EAAA,EAAKY,MAAN,KACC,kBAAC,IAAD,CACCnC,GAAG,qBAEL,kBAACuB,EAAA,EAAKa,QAAN,CACCjB,KAAK,WACLkB,YAAY,YACZC,SAAUjB,KAAKzB,sBAGjB,uBAAG4B,UAAU,yEACZe,MAAO,CAAEC,WAAY,WACrBR,QAASX,KAAKpB,UACd,kBAAC,IAAD,CACCD,GAAG,wB,GA/EYyC,aAqFNC,uBAlGS,SAAAzB,GACvB,MAAO,CACNZ,YAAaY,EAAMrB,mBAAmBS,YACtCC,eAAgBW,EAAMrB,mBAAmBU,mBAGhB,SAACqC,GAC3B,MAAO,CACN/C,mBAAoB,SAACgD,EAAMC,GAAP,OCjBY,SAACF,EAAUC,EAAMC,GAC/CF,EAAS,CAAExB,KAAM2B,IAAoBC,QAASH,EAAM5C,GAAI6C,IDgBlBjD,CAAmB+C,EAAUC,EAAMC,IAC3EzC,OAAQ,kBAAMA,YAAOuC,IACrB5B,MAAO,kBAAMA,YAAM4B,OAwFND,CAA6ChD","file":"static/js/12.dd07fd3d.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { onSigninFormChange } from '../../redux/actions/signin.js';\r\nimport { signIn, admin } from '../../redux/actions/app.js';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Api from \"../../api/Api.js\";\r\nimport { Path } from '../../utils/Path.js';\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tsignInEmail: state.onSigninFormChange.signInEmail,\r\n\t\tsignInPassword: state.onSigninFormChange.signInPassword\r\n\t}\r\n}\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonSigninFormChange: (data, targetId) => onSigninFormChange(dispatch, data, targetId),\r\n\t\tsignIn: () => signIn(dispatch),\r\n\t\tadmin: () => admin(dispatch)\r\n\t}\r\n}\r\nclass Signin extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowFail: false\r\n\t\t}\r\n\t}\r\n\tonSigninFormChange = (event) => {\r\n\t\tthis.props.onSigninFormChange(event.target.value, event.target.id);\r\n\t}\r\n\tonSubmit = async () => {\r\n\t\tconst user = await (await Api.signIn(this.props.signInEmail, this.props.signInPassword)).json();\r\n\t\tif (user.id) {\r\n\t\t\tthis.props.loadUser(user);\r\n\t\t\tthis.props.signIn();\r\n\t\t\tthis.props.history.push(Path.root);\r\n\t\t\tif (user.role === \"admin\") {\r\n\t\t\t\tthis.props.admin();\r\n\t\t\t\tthis.props.history.push(Path.admin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Form className=\"w-80 center bg-light-yellow pa2 br3 mt2\"\r\n\t\t\t\tonKeyPress={(ev) => {\r\n\t\t\t\t\tif (ev.key === 'Enter') {\r\n\t\t\t\t\t\tthis.onSubmit();\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.emailFormatFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Form.Group controlId=\"signInEmail\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"signin.email\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"pelda@pizzavilag.hu\"\r\n\t\t\t\t\t\tonChange={this.onSigninFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId=\"signInPassword\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"signin.password\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"JelszÃ³\"\r\n\t\t\t\t\t\tonChange={this.onSigninFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<p className=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0\"\r\n\t\t\t\t\tstyle={{ background: \"#c4954f\" }}\r\n\t\t\t\t\tonClick={this.onSubmit}>\r\n\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\tid=\"signin.signIn\" />\r\n\t\t\t\t</p>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Signin);","import { CHANGE_SIGNIN_FORM } from \"../actiontypes/signin\"\r\nexport const onSigninFormChange = (dispatch, data, targetId) => {\r\n    dispatch({ type: CHANGE_SIGNIN_FORM, payload: data, id: targetId });\r\n}"],"sourceRoot":""}