{"version":3,"sources":["pages/Register/Register.js","pages/Order/Order.js"],"names":["Register","props","handleSubmitButton","isOrder","className","style","background","onClick","onSubmit","id","handlePassword","Row","Group","controlId","Label","Control","type","placeholder","onChange","onRegisterFormChange","event","setState","target","value","a","state","email","password","password2","firstname","lastname","phone","zip","city","address","comment","test","handleAlert","length","Api","register","json","user","loadUser","dispatch","UserActions","signIn","history","push","Path","root","showFail","passwordFail","passwordLengthFail","emailFail","show","this","prevProps","prevState","onKeyPress","ev","key","preventDefault","variant","Component","connect","Order","reg","userSignedIn","float","shoppingCart","userData","Constants","BlackList","forEach","char","includes","search","formatFail","pizzaList","pizza","index","name","size","price","order","sumPrice","OrderActions","emptyCart","showSuccess","Heading","overflowY","height","map","i","manageUser"],"mappings":"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","file":"static/js/8.d5dbee74.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Api from \"../../api/Api.js\";\r\nimport { Path } from '../../utils/Path';\r\nimport { UserActions } from '../../redux/actions/app.js';\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tdispatch\r\n\t}\r\n}\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowFail: false,\r\n\t\t\tpasswordFail: false,\r\n\t\t\tpasswordLengthFail: false,\r\n\t\t\temailFail: false,\r\n\t\t\temail: '',\r\n\t\t\tpassword: '',\r\n\t\t\tpassword2: '',\r\n\t\t\tfirstname: '',\r\n\t\t\tlastname: '',\r\n\t\t\tphone: '',\r\n\t\t\tzip: '',\r\n\t\t\tcity: '',\r\n\t\t\taddress: '',\r\n\t\t\tcomment: ''\r\n\t\t};\r\n\t}\r\n\thandleSubmitButton = (isOrder) => {\r\n\t\tif (!isOrder) {\r\n\t\t\treturn (\r\n\t\t\t\t<p className=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0\"\r\n\t\t\t\t\tstyle={{ background: \"#c4954f\" }}\r\n\t\t\t\t\tonClick={this.onSubmit}>\r\n\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\tid=\"register.register\" />\r\n\t\t\t\t</p>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\thandlePassword = (isOrder) => {\r\n\t\tif (!isOrder) {\r\n\t\t\treturn (\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Form.Group controlId=\"password\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.password\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Jelszó\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Form.Group controlId=\"password2\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.passwordAgain\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Jelszó\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tonRegisterFormChange = (event) => {\r\n\t\tthis.setState({ [event.target.id]: event.target.value });\r\n\t}\r\n\tonSubmit = async () => {\r\n\t\tconst { email, password, password2, firstname, lastname, phone, zip, city, address, comment } = this.state;\r\n\t\t// eslint-disable-next-line\r\n\t\tconst blackList = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/; //RFC 5322 Official Standard\r\n\t\tif (!blackList.test(email)) {\r\n\t\t\tthis.handleAlert(\"emailFail\", true);\r\n\t\t}\r\n\t\telse if (password.length < 8 && !this.props.isOrder) {\r\n\t\t\tthis.handleAlert(\"passwordLengthFail\", true);\r\n\t\t}\r\n\t\telse if (password !== password2 && !this.props.isOrder) {\r\n\t\t\tthis.handleAlert(\"passwordFail\", true);\r\n\t\t}\r\n\t\telse if ((!lastname || !firstname || !zip || !city || !address || !phone || !email || !password || !password2) && !this.props.isOrder) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst user = await (await Api.register(email, password, firstname, lastname, phone, zip, city, address, comment)).json();\r\n\t\t\tif (user.id) {\r\n\t\t\t\tthis.props.loadUser(user);\r\n\t\t\t\tthis.props.dispatch(UserActions.signIn());\r\n\t\t\t\tthis.props.history.push(Path.root);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t\telse if (type === \"passwordFail\") {\r\n\t\t\tthis.setState({ passwordFail: show });\r\n\t\t}\r\n\t\telse if (type === \"passwordLengthFail\") {\r\n\t\t\tthis.setState({ passwordLengthFail: show });\r\n\t\t}\r\n\t\telse if (type === \"emailFail\") {\r\n\t\t\tthis.setState({ emailFail: show });\r\n\t\t}\r\n\t}\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tif (this.state !== prevState) {\r\n\t\t\tthis.props.loadUser(this.state);\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Form className=\"w-80 center bg-light-yellow pa2 br3 mt2\"\r\n\t\t\t\tonKeyPress={(ev) => {\r\n\t\t\t\t\tif (ev.key === 'Enter' && !this.props.isOrder) {\r\n\t\t\t\t\t\tthis.onSubmit();\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<Alert show={this.state.emailFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.emailFormatFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => { this.handleAlert(\"emailFail\", false); this.handleAlert(\"formatFail\", false); }} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Alert show={this.state.passwordLengthFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.passwordLengthFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"passwordLengthFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Alert show={this.state.passwordFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.passwordFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"passwordFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.admin\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"register.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Form.Group controlId=\"email\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"register.email\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"pelda@pizzavilag.hu\"\r\n\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t{this.handlePassword(this.props.isOrder)}\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Form.Group controlId=\"lastname\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.lastName\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Vezetéknév\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<Form.Group controlId=\"firstname\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.firstName\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Keresztnév\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Group controlId=\"phone\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"register.phone\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Telefonszám\"\r\n\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Row>\r\n\t\t\t\t\t<Col className=\"col-5\">\r\n\t\t\t\t\t\t<Form.Group controlId=\"zip\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.zip\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Irányítószám\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col className=\"col-7\">\r\n\t\t\t\t\t\t<Form.Group controlId=\"city\">\r\n\t\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"register.city\" />\r\n\t\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Település\"\r\n\t\t\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t\t\t</Form.Group>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Form.Row>\r\n\t\t\t\t<Form.Group controlId=\"address\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"register.address\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Cím\"\r\n\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId=\"comment\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"register.comment\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tplaceholder=\"Pl.: Kapucsengő száma - nem kötelező kitölteni!\"\r\n\t\t\t\t\t\tonChange={this.onRegisterFormChange} />\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t{this.handleSubmitButton(this.props.isOrder)}\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(null,mapDispatchToProps)(Register);","import React, { Component } from 'react';\r\nimport Register from '../Register/Register';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Api from \"../../api/Api.js\";\r\nimport { Constants } from '../../utils/Constants';\r\nimport { OrderActions } from '../../redux/actions/app';\r\nconst mapStateToProps = state => {\r\n\treturn {\r\n\t\tuser: state.manageUser.user\r\n\t}\r\n}\r\nclass Order extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowFail: false,\r\n\t\t\tshowSuccess: false,\r\n\t\t\tformatFail: false,\r\n\t\t\temailFail: false,\r\n\t\t\tuser:\r\n\t\t\t{\r\n\t\t\t\temail: '',\r\n\t\t\t\tfirstname: '',\r\n\t\t\t\tlastname: '',\r\n\t\t\t\tphone: '',\r\n\t\t\t\tzip: '',\r\n\t\t\t\tcity: '',\r\n\t\t\t\taddress: '',\r\n\t\t\t\tcomment: ''\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tloadUser = (reg) => {\r\n\t\tthis.setState({ user: reg })\r\n\t}\r\n\tuserSignedIn = (user) => {\r\n\t\tif (user.id) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"w-50 mh1\" >\r\n\t\t\t\t\t<article className=\"pa1 pa2-ns\" style={{ float: \"right\" }}>\r\n\t\t\t\t\t\t<h1 className=\"f4 bold center mw6\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"order.details\" />\r\n\t\t\t\t\t\t</h1>\r\n\t\t\t\t\t\t<ul className=\"list pl0 ml0 center mw6 ba b--light-silver br2 bg-light-yellow\">\r\n\t\t\t\t\t\t\t<li className=\"ph3 pv3 bb b--light-silver\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"order.name\" />: {user.lastname} {user.firstname}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"ph3 pv3 bb b--light-silver\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"order.address\" />: {user.address}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"ph3 pv3 bb b--light-silver\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"order.phone\" />: {user.phone}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"ph3 pv3 bb b--light-silver\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"order.email\" />: {user.email}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t<li className=\"ph3 pv3\">\r\n\t\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\t\tid=\"order.comment\" />: {user.comment}\r\n\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</article>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn (<Register loadUser={this.loadUser} isOrder={true} />);\r\n\t\t}\r\n\t}\r\n\tonSubmit = async () => {\r\n\t\tconst { shoppingCart } = this.props;\r\n\t\tlet user = '';\r\n\t\tif (this.props.user.id) {\r\n\t\t\tuser = this.props.user;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tuser = this.state.user;\r\n\t\t}\r\n\t\tlet userData = `${user.lastname} ${user.firstname}\\n${user.zip} ${user.city} ${user.address}\\nTel.: ${user.phone}\\nE-mail: ${user.email}\\nMegj.: ${user.comment}`;\r\n\t\tConstants.BlackList.forEach(char => {\r\n\t\t\tif (user.email.includes(char, user.email.search(\"@\") + 1)) {\r\n\t\t\t\tthis.handleAlert(\"formatFail\", true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t)\r\n\t\tif (!user.email.includes(\"@\") || !user.email.includes(\".\", user.email.search(\"@\")) || this.state.formatFail) {\r\n\t\t\tthis.handleAlert(\"emailFail\", true);\r\n\t\t}\r\n\t\telse if (!user.lastname || !user.firstname || !user.zip || !user.city || !user.address || !user.phone || !user.email) {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlet pizzaList = '';\r\n\t\t\tshoppingCart.forEach(function (pizza, index) {\r\n\t\t\t\tpizzaList += `${pizza.name} ${pizza.size} cm      ${pizza.price} Ft\\n`;\r\n\t\t\t})\r\n\t\t\tApi.order(userData, pizzaList, this.props.sumPrice);\r\n\t\t\tthis.handleAlert(\"showSuccess\", true);\r\n\t\t\tthis.props.dispatch(OrderActions.emptyCart());\r\n\t\t}\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t\telse if (type === \"showSuccess\") {\r\n\t\t\tthis.setState({ showSuccess: show });\r\n\t\t}\r\n\t\telse if (type === \"formatFail\") {\r\n\t\t\tthis.setState({ formatFail: show });\r\n\t\t}\r\n\t\telse if (type === \"emailFail\") {\r\n\t\t\tthis.setState({ emailFail: show });\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"flex flex-column items-center \" >\r\n\t\t\t\t<Alert show={this.state.emailFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.emailFormatFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => { this.handleAlert(\"emailFail\", false); this.handleAlert(\"formatFail\", false); }} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Alert show={this.state.showSuccess} variant=\"success\">\r\n\t\t\t\t\t<Alert.Heading>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.confirm\" />\r\n\t\t\t\t\t</Alert.Heading>\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.thankyou\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<p className=\"mb-0\">\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.info\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.emailFormatFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<div className=\"w-100 mr2 flex justify-center\">\r\n\t\t\t\t\t<div className=\"flex justify-center\">\r\n\t\t\t\t\t\t{this.userSignedIn(this.props.user)}\r\n\t\t\t\t\t\t<div className=\"w-50 mh1\" style={{ overflowY: 'auto', height: '600px' }}>\r\n\t\t\t\t\t\t\t<article className=\"pa1 pa2-ns\" style={{ float: \"left\" }}>\r\n\t\t\t\t\t\t\t\t<ul className=\"list pl0 ml0 center mw6 ba b--light-silver br2 bg-light-yellow\">\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tthis.props.shoppingCart.map((pizza, i) => {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<li className=\"ph3 pv3 bb b--light-silver tc\" key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{pizza.name} {pizza.size} cm</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<p>{pizza.price} Ft</p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t</article>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"w-25 mr2 flex\">\r\n\t\t\t\t\t<p className=\"b red \">Végösszeg: {this.props.sumPrice} Ft</p>\r\n\t\t\t\t\t<p className=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0 ml3\"\r\n\t\t\t\t\t\tstyle={{ background: \"#c4954f\" }}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tthis.onSubmit();\r\n\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"order.checkout\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(mapStateToProps)(Order);"],"sourceRoot":""}