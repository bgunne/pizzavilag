{"version":3,"sources":["pages/Signin/Signin.js"],"names":["Signin","props","onSigninFormChange","event","setState","target","id","value","onSubmit","a","Api","signIn","state","signInEmail","signInPassword","json","user","loadUser","history","push","Path","root","role","admin","handleAlert","showFail","type","show","this","className","onKeyPress","ev","key","preventDefault","variant","onClick","Group","controlId","Label","Control","placeholder","onChange","style","background","Component","connect","dispatch"],"mappings":"oQAeMA,E,kDACL,WAAYC,GAAQ,IAAD,8BAClB,cAAMA,IAQPC,mBAAqB,SAACC,GACrB,EAAKC,SAAL,eAAiBD,EAAME,OAAOC,GAAKH,EAAME,OAAOE,SAV9B,EAYnBC,SAZmB,sBAYR,4BAAAC,EAAA,sEACgBC,IAAIC,OAAO,EAAKC,MAAMC,YAAa,EAAKD,MAAME,gBAD9D,8BAC+EC,OAD/E,QACJC,EADI,QAEDV,IACR,EAAKL,MAAMgB,SAASD,GACpB,EAAKf,MAAMU,SACX,EAAKV,MAAMiB,QAAQC,KAAKC,IAAKC,MACX,UAAdL,EAAKM,OACR,EAAKrB,MAAMsB,QACX,EAAKtB,MAAMiB,QAAQC,KAAKC,IAAKG,SAI9B,EAAKC,YAAY,YAAY,GAZpB,2CAVV,EAAKZ,MACL,CACCa,UAAU,EACVZ,YAAa,GACbC,eAAgB,IANC,E,wDA2BPY,EAAMC,GACJ,aAATD,GACHE,KAAKxB,SAAS,CAAEqB,SAAUE,M,+BAGlB,IAAD,OACR,OACC,kBAAC,IAAD,CAAME,UAAU,0CACfC,WAAY,SAACC,GACG,UAAXA,EAAGC,MACN,EAAKxB,WACLuB,EAAGE,oBAGL,kBAAC,IAAD,CAAON,KAAMC,KAAKhB,MAAMa,SAAUS,QAAQ,UACzC,2BACC,kBAAC,IAAD,CACC5B,GAAG,2BAEL,6BACA,yBAAKuB,UAAU,8BACd,kBAAC,IAAD,CAAQM,QAAS,kBAAM,EAAKX,YAAY,YAAY,IAAQU,QAAQ,kBACnE,kBAAC,IAAD,CACC5B,GAAG,mBAIP,kBAAC,IAAK8B,MAAN,CAAYC,UAAU,eACrB,kBAAC,IAAKC,MAAN,KACC,kBAAC,IAAD,CACChC,GAAG,kBAEL,kBAAC,IAAKiC,QAAN,CACCb,KAAK,QACLc,YAAY,sBACZC,SAAUb,KAAK1B,sBAGjB,kBAAC,IAAKkC,MAAN,CAAYC,UAAU,kBACrB,kBAAC,IAAKC,MAAN,KACC,kBAAC,IAAD,CACChC,GAAG,qBAEL,kBAAC,IAAKiC,QAAN,CACCb,KAAK,WACLc,YAAY,YACZC,SAAUb,KAAK1B,sBAGjB,uBAAG2B,UAAU,yEACZa,MAAO,CAAEC,WAAY,WACrBR,QAASP,KAAKpB,UACd,kBAAC,IAAD,CACCF,GAAG,wB,GAjFYsC,aAuFNC,sBAAQ,MA7FI,SAACC,GAC3B,MAAO,CACNnC,OAAQ,kBAAMA,YAAOmC,IACrBvB,MAAO,kBAAMA,YAAMuB,OA0FND,CAAkC7C","file":"static/js/12.07e0502a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { signIn, admin } from '../../redux/actions/app.js';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Api from \"../../api/Api.js\";\r\nimport { Path } from '../../utils/Path.js';\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tsignIn: () => signIn(dispatch),\r\n\t\tadmin: () => admin(dispatch)\r\n\t}\r\n}\r\nclass Signin extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state =\r\n\t\t{\r\n\t\t\tshowFail: false,\r\n\t\t\tsignInEmail: '',\r\n\t\t\tsignInPassword: ''\r\n\t\t}\r\n\t}\r\n\tonSigninFormChange = (event) => {\r\n\t\tthis.setState({ [event.target.id]: event.target.value });\r\n\t}\r\n\tonSubmit = async () => {\r\n\t\tconst user = await (await Api.signIn(this.state.signInEmail, this.state.signInPassword)).json();\r\n\t\tif (user.id) {\r\n\t\t\tthis.props.loadUser(user);\r\n\t\t\tthis.props.signIn();\r\n\t\t\tthis.props.history.push(Path.root);\r\n\t\t\tif (user.role === \"admin\") {\r\n\t\t\t\tthis.props.admin();\r\n\t\t\t\tthis.props.history.push(Path.admin);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.handleAlert(\"showFail\", true);\r\n\t\t}\r\n\t}\r\n\thandleAlert(type, show) {\r\n\t\tif (type === \"showFail\") {\r\n\t\t\tthis.setState({ showFail: show });\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<Form className=\"w-80 center bg-light-yellow pa2 br3 mt2\"\r\n\t\t\t\tonKeyPress={(ev) => {\r\n\t\t\t\t\tif (ev.key === 'Enter') {\r\n\t\t\t\t\t\tthis.onSubmit();\r\n\t\t\t\t\t\tev.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}}>\r\n\t\t\t\t<Alert show={this.state.showFail} variant=\"danger\" >\r\n\t\t\t\t\t<p>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"alert.emailFormatFail\" />\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"d-flex justify-content-end\">\r\n\t\t\t\t\t\t<Button onClick={() => this.handleAlert(\"showFail\", false)} variant=\"outline-danger\">\r\n\t\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\t\tid=\"alert.close\" />\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Alert>\r\n\t\t\t\t<Form.Group controlId=\"signInEmail\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"signin.email\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\tplaceholder=\"pelda@pizzavilag.hu\"\r\n\t\t\t\t\t\tonChange={this.onSigninFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<Form.Group controlId=\"signInPassword\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\t\tid=\"signin.password\" />\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tplaceholder=\"JelszÃ³\"\r\n\t\t\t\t\t\tonChange={this.onSigninFormChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\t\t\t\t<p className=\"f6 grow no-underline br-pill ph3 pv2 dib white bg-black pointer ba bw0\"\r\n\t\t\t\t\tstyle={{ background: \"#c4954f\" }}\r\n\t\t\t\t\tonClick={this.onSubmit}>\r\n\t\t\t\t\t<FormattedMessage\r\n\t\t\t\t\t\tid=\"signin.signIn\" />\r\n\t\t\t\t</p>\r\n\t\t\t</Form>\r\n\t\t);\r\n\t}\r\n}\r\nexport default connect(null, mapDispatchToProps)(Signin);"],"sourceRoot":""}